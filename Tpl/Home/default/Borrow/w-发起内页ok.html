<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<link rel="stylesheet" type="text/css" href="css/all.css" />
<link rel="stylesheet" href="css/index.css">
<script type="text/javascript" src="js/jquery-1.11.3.min.js"></script>


<body>
    <div class="header ">
        <div class="w-header w-content flex">
            <a href="##" class="w-header-left">
                < 返回</a>
                    <h3>发起内容</h3>
                    <a href="##" class="w-header-right">会员中心</a>
        </div>
    </div>

    <!-- origin start  -->


    <div class="w-origin-input-warpper">
        <div class="w-origin-input ">
            <div class="origin-input w-content">
                <label for="">筹款金额</label>
                <input type="number" placeholder="1800000">
                <span>元</span>
            </div>
            <div class="origin-input w-content" style="border:0;">
                <label for="">筹款天数</label>
                <input class="number" type="number" placeholder="10">
                <span>天</span>
            </div>
        </div>

        <div class="w-origin-input ">
            <div class="origin-input w-content">
                <label for="">项目标题</label>
                <input type="text" placeholder="为你写诗">

            </div>
            <div class="origin-input w-content textarea clear">
                <label for="" class="fl">项目简介</label>
                <textarea class="fr" name="" id=""></textarea>

            </div>
            <div class="origin-input w-content textarea clear">
                <label class="fl" for="">项目正文</label>
                <textarea class="fr" name="" id=""></textarea>

            </div>
        </div>


        <div class="w-origin-input w-origin-input-tt">


            <div class="origin-input w-content radio ">


                <lable class="lable fl">项目分类</lable>
                <div class="fl">


                    <input class="fl" type="radio" name="pay" id="pay1">
                    <label class="fl" for="pay1"></label>
                    <span class="fl">联合养殖</span>


                    <input class="fl" type="radio" name="pay" id="pay2">
                    <label class="fl" for="pay2"></label>
                    <span class="fl">联合销售
                    </span>
                    <input class="fl" type="radio" name="pay" id="pay3">
                    <label class="fl" for="pay3"></label>
                    <span class="fl">共建销售
                    </span>
                </div>
            </div>

            <div class="w-container w-content">

                <div class="row main">
                    <div class="col-md-12">
                        <h2 class="top_title">
                            <span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span>

                        </h2>

                        <div class="row w-row">
                            <span>所在地区</span>
                            <a href="#" class="btn btn-info btn-lg active" role="button" id="sel_city">山东省 济南市</a>
                        </div>

                    </div>
                </div>
                
            </div>
        </div>

        <!-- 头像上传 -->

        <div class="w-origin-touxiang w-origin-touxiang1">
            <h3>页面封面</h3>
            <div class="touxiang clear">
                <div class="left fl">
                    <label for="doc">
                        <div class="img">
                            <img src="./img/w-jia.jpg" alt="">
                        </div>

                        <div>图片上传</div>


                    </label>



                    <input type=file name="doc" id="doc" onchange="javascript:setImagePreview();" style="display:none">
                </div>
                <div class="right fr">
                    支持jpg、jpeg、png、gif格式大小不 超过20.0MB，
                   
              
                    <span>最佳尺寸：760px*530px</span>
                </div>
                <div class="clear" id="localImag">
                    <img id="preview" style="diplay:none" />
                </div>

            </div>
        </div>
       
        <div class="w-origin-touxiang">
            <h3>页面封面
                <span>(最多上传五张)</span>
            </h3>
            <div class="container ">
                <!--    照片添加    -->
                <div class="z_photo touxiang  clear">
                    <div class="left fl">
                        <label for="file">
                            <div class="img">
                                <img src="./img/w-jia.jpg" alt="">
                            </div>

                            <div>图片上传</div>


                        </label>
                        <input type="file" name="file" id="file" value="" accept="image/*" multiple onchange="imgChange('z_photo','z_file');" style="display: none"
                        />

                    </div>
                    <div class="right fr">
                            支持jpg、jpeg、png、gif格式大小不 超过20.0MB，
                        <span>最佳尺寸：760px*530px</span>
                    </div>
                   

                </div>

                <!--遮罩层-->
                <div class="z_mask">
                    <!--弹出框-->
                    <div class="z_alert">
                        <p>确定要删除这张图片吗？</p>
                        <p>
                            <span class="z_cancel">取消</span>
                            <span class="z_sure">确定</span>
                        </p>
                    </div>
                </div>
            </div>
        </div>



<!-- 下一步 -->
<div class="w-origin-xiayibu">
    下一步
</div>

        <!-- origin end -->


        <div class="footer">
            <ul>
                <li class="home on">
                    <a href="##">
                        <img src="img/zhuye.png">
                        <img src="img/zhuye1.png">
                        <span>主页</span>
                    </a>
                </li>
                <li class="home">
                    <a href="##">
                        <img src="img/faqi.png">
                        <img src="img/faqi1.png">
                        <span>发起</span>
                    </a>
                </li>
                <li class="home">
                    <a href="##">
                        <img src="img/shangcheng.png">
                        <img src="img/shangcheng1.png">
                        <span>商城</span>
                    </a>
                </li>

                <li class="home">
                    <a href="##">
                        <img src="img/wode.png">
                        <img src="img/wode1.png">
                        <span>我的</span>
                    </a>
                </li>
            </ul>
        </div>
        <script src="js/picker.min.js"></script>
        <script src="js/city.js"></script>
        <script>
            var nameEl = document.getElementById('sel_city');

            var first = []; /* 省，直辖市 */
            var second = []; /* 市 */
            var third = []; /* 镇 */

            var selectedIndex = [0, 0, 0]; /* 默认选中的地区 */

            var checked = [0, 0, 0]; /* 已选选项 */

            function creatList(obj, list) {
                obj.forEach(function (item, index, arr) {
                    var temp = new Object();
                    temp.text = item.name;
                    temp.value = index;
                    list.push(temp);
                })
            }

            creatList(city, first);

            if (city[selectedIndex[0]].hasOwnProperty('sub')) {
                creatList(city[selectedIndex[0]].sub, second);
            } else {
                second = [{ text: '', value: 0 }];
            }

            if (city[selectedIndex[0]].sub[selectedIndex[1]].hasOwnProperty('sub')) {
                creatList(city[selectedIndex[0]].sub[selectedIndex[1]].sub, third);
            } else {
                third = [{ text: '', value: 0 }];
            }

            var picker = new Picker({
                data: [first, second, third],
                selectedIndex: selectedIndex,
                title: '地址选择'
            });

            picker.on('picker.select', function (selectedVal, selectedIndex) {
                var text1 = first[selectedIndex[0]].text;
                var text2 = second[selectedIndex[1]].text;
                var text3 = third[selectedIndex[2]] ? third[selectedIndex[2]].text : '';

                nameEl.innerText = text1 + ' ' + text2 + ' ' + text3;
            });

            picker.on('picker.change', function (index, selectedIndex) {
                if (index === 0) {
                    firstChange();
                } else if (index === 1) {
                    secondChange();
                }

                function firstChange() {
                    second = [];
                    third = [];
                    checked[0] = selectedIndex;
                    var firstCity = city[selectedIndex];
                    if (firstCity.hasOwnProperty('sub')) {
                        creatList(firstCity.sub, second);

                        var secondCity = city[selectedIndex].sub[0]
                        if (secondCity.hasOwnProperty('sub')) {
                            creatList(secondCity.sub, third);
                        } else {
                            third = [{ text: '', value: 0 }];
                            checked[2] = 0;
                        }
                    } else {
                        second = [{ text: '', value: 0 }];
                        third = [{ text: '', value: 0 }];
                        checked[1] = 0;
                        checked[2] = 0;
                    }

                    picker.refillColumn(1, second);
                    picker.refillColumn(2, third);
                    picker.scrollColumn(1, 0)
                    picker.scrollColumn(2, 0)
                }

                function secondChange() {
                    third = [];
                    checked[1] = selectedIndex;
                    var first_index = checked[0];
                    if (city[first_index].sub[selectedIndex].hasOwnProperty('sub')) {
                        var secondCity = city[first_index].sub[selectedIndex];
                        creatList(secondCity.sub, third);
                        picker.refillColumn(2, third);
                        picker.scrollColumn(2, 0)
                    } else {
                        third = [{ text: '', value: 0 }];
                        checked[2] = 0;
                        picker.refillColumn(2, third);
                        picker.scrollColumn(2, 0)
                    }
                }

            });

            picker.on('picker.valuechange', function (selectedVal, selectedIndex) {
                console.log(selectedVal);
                console.log(selectedIndex);
            });

            nameEl.addEventListener('click', function () {
                picker.show();
            });
        </script>
        <script>
  function setImagePreview() {
                var docObj=document.getElementById("doc");
       
                var imgObjPreview=document.getElementById("preview");
                        if(docObj.files &&    docObj.files[0]){
                                //火狐下，直接设img属性
                                imgObjPreview.style.display = 'block';
                                                  
                                //imgObjPreview.src = docObj.files[0].getAsDataURL();
         
              //火狐7以上版本不能用上面的getAsDataURL()方式获取，需要一下方式  
              imgObjPreview.src = window.URL.createObjectURL(docObj.files[0]);
         
                        }else{
                                //IE下，使用滤镜
                                docObj.select();
                                var imgSrc = document.selection.createRange().text;
                                var localImagId = document.getElementById("localImag");
                                //必须设置初始大小
                                localImagId.style.width = "300px";
                                localImagId.style.height = "120px";
                                //图片异常的捕捉，防止用户修改后缀来伪造图片
        try{
                                        localImagId.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)";
                                        localImagId.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src = imgSrc;
                                }catch(e){
                                        alert("您上传的图片格式不正确，请重新选择!");
                                        return false;
                                }
                                imgObjPreview.style.display = 'none';
                                document.selection.empty();
                        }
                        return true;
                }
        </script>




        <!-- 多图上传 -->

        <script type="text/javascript">
            //px转换为rem
            (function (doc, win) {
                var docEl = doc.documentElement,
                    resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
                    recalc = function () {
                        var clientWidth = docEl.clientWidth;
                        if (!clientWidth) return;
                        if (clientWidth >= 640) {
                            docEl.style.fontSize = '100px';
                        } else {
                            docEl.style.fontSize = 100 * (clientWidth / 640) + 'px';
                        }
                    };

                if (!doc.addEventListener) return;
                win.addEventListener(resizeEvt, recalc, false);
                doc.addEventListener('DOMContentLoaded', recalc, false);
            })(document, window);

            function imgChange(obj1, obj2) {
                //获取点击的文本框
                var file = document.getElementById("file");
                //存放图片的父级元素
                var imgContainer = document.getElementsByClassName(obj1)[0];
                //获取的图片文件
                var fileList = file.files;
                //文本框的父级元素
                var input = document.getElementsByClassName(obj2)[0];
                var imgArr = [];
                //遍历获取到得图片文件
                for (var i = 0; i < fileList.length; i++) {
                    var imgUrl = window.URL.createObjectURL(file.files[i]);
                    imgArr.push(imgUrl);
                    var img = document.createElement("img");
                    img.setAttribute("src", imgArr[i]);
                    var imgAdd = document.createElement("div");
                    imgAdd.setAttribute("class", "z_addImg");
                    imgAdd.appendChild(img);
                    imgContainer.appendChild(imgAdd);
                };
                imgRemove();
            };

            function imgRemove() {
                var imgList = document.getElementsByClassName("z_addImg");
                var mask = document.getElementsByClassName("z_mask")[0];
                var cancel = document.getElementsByClassName("z_cancel")[0];
                var sure = document.getElementsByClassName("z_sure")[0];
                for (var j = 0; j < imgList.length; j++) {
                    imgList[j].index = j;
                    imgList[j].onclick = function () {
                        var t = this;
                        mask.style.display = "block";
                        cancel.onclick = function () {
                            mask.style.display = "none";
                        };
                        sure.onclick = function () {
                            mask.style.display = "none";
                            t.style.display = "none";
                        };

                    }
                };
            };
        </script>



</body>

</html>